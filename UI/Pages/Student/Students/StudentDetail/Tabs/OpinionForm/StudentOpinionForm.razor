@using AutoMapper
@using Shared.Extensions;
@using Shared.RequestModels
@using Shared.ResponseModels
@using Shared.Types;
<div class="card card-custom">
    <div class="card-header ribbon ribbon-clip ribbon-right">
        <div class="ribbon-target" style="top: 12px;">
            <span class="ribbon-inner bg-warning"></span>@L["The Person Entering The Evaluation Data"]: &nbsp; @(IsEditing ? _opinion?.Secretary?.Name : _user.Name)
        </div>
        <h3 class="card-title">
            @(IsEditing ? _opinion?.Student?.User?.Name : _student?.User?.Name) - @(IsEditing ? _opinion?.Period?.GetDescription() + " Kanaat Bilgileri" : " Kanaat Ekranı")
        </h3>
    </div>
    <div class="card-body">
        <div class="accordion  accordion-toggle-arrow" id="accordionExample4">
            @*<div class="card-toolbar position-absolute top-0 right-0 mt-5 mr-5">
            <div class="d-flex self-align-end">
            <SpinnerButton Spinning="false" Disabled="false" OnClick="async () => await Save()">
            <i class="fas fa-save"></i>@(_opinion.Id > 0 ? L["Update"] : L["Save"])
            </SpinnerButton>
            </div>
            </div>*@
            @if (_loaded)
            {
                <EditForm EditContext="_ec">
                    <FluentValidator TValidator="OpinionValidator"></FluentValidator>
                    <div class="row">
                        <div class="col-12 col-md-6">
                            <div class="form-group">
                                <label>@L["Evaluator"]</label>
                                <BlazoredTypeahead SearchMethod="SearchEducators"
                                                   TItem="EducatorResponseDTO"
                                                   TValue="EducatorResponseDTO"
                                                   Value="_opinion.Educator"
                                                   ValueExpression="() => _opinion.Educator"
                                                   ValueChanged="OnChangeEducator"
                                                   EnableDropDown="true"
                                                   placeholder=@L["Select"]>
                                    <SelectedTemplate Context="educator">
                                        @educator.User?.Name
                                    </SelectedTemplate>
                                    <HelpTemplate>
                                        @L["Please enter at least 1 character to search."]
                                    </HelpTemplate>
                                    <NotFoundTemplate Context="searchText">
                                        "@searchText" @L["Could not find an item named"]
                                    </NotFoundTemplate>
                                    <ResultTemplate Context="educator">
                                        @educator.User?.Name
                                    </ResultTemplate>
                                </BlazoredTypeahead>
                                <ValidationMessage For="()=>_opinion.EducatorId" />
                            </div>
                            <div class="form-group">
                                <label>@L["Was the Opinion Note Notified to the Person?"]</label>
                                <div class="col-6 col-form-label">
                                    <div class="radio-inline">
                                        <InputRadioGroup @bind-Value="_opinion.IsNotified">
                                            <label class="radio radio-success">
                                                <InputRadio Value="true"></InputRadio>
                                                <span></span>@L["Yes"]
                                            </label>
                                            <label class="radio radio-danger">
                                                <InputRadio Value="false"></InputRadio>
                                                <span></span>@L["No"]
                                            </label>
                                        </InputRadioGroup>
                                        <ValidationMessage For="()=>_opinion.IsNotified" />
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-md-6">
                            <div class="form-group">
                                <div class="@(IsEditing?GetAverageClass(_opinion.OverallAverage):"bg-primary") rounded d-flex align-items-center justify-content-between text-white max-w-350px h-auto position-relative ml-auto p-7">
                                    <!--begin::Shape-->
                                    <div class="position-absolute opacity-30 top-0 right-0">
                                        <span class="svg-icon svg-icon-2x svg-logo-white svg-icon-flip">
                                            <!--begin::Svg Icon | path:/metronic/theme/html/demo1/dist/assets/media/svg/shapes/abstract-8.svg-->
                                            <svg xmlns="http://www.w3.org/2000/svg" width="176" height="165" viewBox="0 0 176 165" fill="none">
                                                <g clip-path="url(#clip0)">
                                                    <path d="M-10.001 135.168C-10.001 151.643 3.87924 165.001 20.9985 165.001C38.1196 165.001 51.998 151.643 51.998 135.168C51.998 118.691 38.1196 105.335 20.9985 105.335C3.87924 105.335 -10.001 118.691 -10.001 135.168Z" fill="#AD84FF"></path>
                                                    <path d="M28.749 64.3117C28.749 78.7296 40.8927 90.4163 55.8745 90.4163C70.8563 90.4163 83 78.7296 83 64.3117C83 49.8954 70.8563 38.207 55.8745 38.207C40.8927 38.207 28.749 49.8954 28.749 64.3117Z" fill="#AD84FF"></path>
                                                    <path d="M82.9996 120.249C82.9996 144.964 103.819 165 129.501 165C155.181 165 176 144.964 176 120.249C176 95.5342 155.181 75.5 129.501 75.5C103.819 75.5 82.9996 95.5342 82.9996 120.249Z" fill="#AD84FF"></path>
                                                    <path d="M98.4976 23.2928C98.4976 43.8887 115.848 60.5856 137.249 60.5856C158.65 60.5856 176 43.8887 176 23.2928C176 2.69692 158.65 -14 137.249 -14C115.848 -14 98.4976 2.69692 98.4976 23.2928Z" fill="#AD84FF"></path>
                                                    <path d="M-10.0011 8.37466C-10.0011 20.7322 0.409554 30.7493 13.2503 30.7493C26.0911 30.7493 36.5 20.7322 36.5 8.37466C36.5 -3.98287 26.0911 -14 13.2503 -14C0.409554 -14 -10.0011 -3.98287 -10.0011 8.37466Z" fill="#AD84FF"></path>
                                                    <path d="M-2.24881 82.9565C-2.24881 87.0757 1.22081 90.4147 5.50108 90.4147C9.78135 90.4147 13.251 87.0757 13.251 82.9565C13.251 78.839 9.78135 75.5 5.50108 75.5C1.22081 75.5 -2.24881 78.839 -2.24881 82.9565Z" fill="#AD84FF"></path>
                                                    <path d="M55.8744 12.1044C55.8744 18.2841 61.0788 23.2926 67.5001 23.2926C73.9196 23.2926 79.124 18.2841 79.124 12.1044C79.124 5.92653 73.9196 0.917969 67.5001 0.917969C61.0788 0.917969 55.8744 5.92653 55.8744 12.1044Z" fill="#AD84FF"></path>
                                                </g>
                                            </svg>
                                            <!--end::Svg Icon-->
                                        </span>
                                    </div>
                                    <!--end::Shape-->
                                    <div class="font-weight-boldest font-size-h5">@L["Overall Average"]</div>
                                    <div class="text-right d-flex flex-column">
                                        <span class="font-weight-boldest font-size-h1 line-height-sm">@(IsEditing ? _opinion.OverallAverage : GetOverallAverage())</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12 col-md-6">
                            <label>@L["Start Date"]</label>
                            <div class="form-group">
                                <InputDate disabled Value="_opinion.StartDate" ValueExpression="()=>_opinion.StartDate" class="form-control"></InputDate>
                                <ValidationMessage For="()=>_opinion.StartDate" />
                            </div>
                        </div>
                        <div class="col-12 col-md-6">
                            <div class="form-group">
                                <label>@L["End Date"]</label>
                                <InputDate disabled Value="_opinion.EndDate" ValueExpression="()=>_opinion.EndDate" class="form-control"></InputDate>
                                <ValidationMessage For="()=>_opinion.EndDate" />
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        @if (IsEditing)
                        {
                            <div class="col-12 col-md-6">
                                <button class="btn btn-outline-success mr-2" @onclick="() => { dropzoneForUpdate.ResetStatus(); UploaderModalForUpdate.OpenModal(); }">
                                    <i class="fas fa-upload"></i>@L["Opinion Form Document Upload"]
                                </button>
                                <FileItem Documents="_opinion.Documents.Where(x=>x.DocumentType == DocumentTypes.OpinionForm).ToList()" Loaded="true" IsEditing="true"></FileItem>
                                <ValidationMessage For="@(() => _opinion.Documents)" />
                            </div>
                            if (_opinion.IsNotified == true)
                            {
                                <div class="col-12 col-md-6">
                                    <button class="btn btn-outline-success mr-2" @onclick="() => { dropzoneForUpdateCommunique.ResetStatus(); UploaderModalForUpdate_2.OpenModal(); }">
                                        <i class="fas fa-upload"></i>@L["Student Communique Document Upload"]
                                    </button>
                                    <FileItem Documents="_opinion.Documents.Where(x=>x.DocumentType == DocumentTypes.Communique).ToList()" Loaded="true" IsEditing="true"></FileItem>
                                </div>
                            }
                        }
                        else
                        {
                            <div class="col-12 col-md-6">
                                <button class="btn btn-outline-success mr-2" @onclick="() => { dropzoneForAdd.ResetStatus(); UploaderModalForAdd.OpenModal(); }">
                                    <i class="fas fa-upload"></i>@L["Opinion Form Document Upload"]
                                </button>
                                <FileItem Documents="_opinion?.Documents?.Where(x=>x.DocumentType == DocumentTypes.OpinionForm)?.ToList()" Loaded="_fileLoaded" IsEditing="true"></FileItem>
                                <ValidationMessage For="@(() => _opinion.Documents)" />
                            </div>
                            if (_opinion.IsNotified == true)
                            {
                                <div class="col-12 col-md-6">
                                    <button class="btn btn-outline-success mr-2" @onclick="() => { dropzoneForAddCommunique.ResetStatus(); UploaderModalForAdd_2.OpenModal(); }">
                                        <i class="fas fa-upload"></i>@L["Student Communique Document Upload"]
                                    </button>
                                    <FileItem Documents="_opinion?.Documents?.Where(x=>x.DocumentType == DocumentTypes.Communique)?.ToList()" Loaded="_fileLoaded" IsEditing="true"></FileItem>
                                </div>
                            }
                        }
                    </div>

                    <div class="card card-custom">
                        <div class="card-body">
                            <h5 class="card-title">
                                Dönem İçindeki Süre Uzatmalar
                            </h5>
                            @if (_educationTrackings != null)
                            {
                                <Grid Items="_educationTrackings" class="table table-hover table-bordered " RowClass='(row, index) => ""'>
                                    <GridColumn TRowData="EducationTrackingResponseDTO" Title="@L["Process Type"]">
                                        <ChildContent Context="ett">
                                            @L[ett.ProcessType.Value.GetDescription()]
                                        </ChildContent>
                                    </GridColumn>
                                    <GridColumn TRowData="EducationTrackingResponseDTO" Title="@L["Reason"]">
                                        <ChildContent Context="ett">
                                            @(L[ett.ReasonType.Value.GetDescription()])
                                        </ChildContent>
                                    </GridColumn>
                                    <GridColumn TRowData="EducationTrackingResponseDTO" Title="@L["Institution of Education"]">
                                        <ChildContent Context="ett">
                                            @(ett.Program != null ? ett.Program?.Name : "-")
                                        </ChildContent>
                                    </GridColumn>
                                    <GridColumn TRowData="EducationTrackingResponseDTO" Title="@L["Assignment"]">
                                        <ChildContent Context="ett">
                                            @(ett.AssignmentType != null ? L[ett.AssignmentType.Value.GetDescription()] : "-")
                                        </ChildContent>
                                    </GridColumn>
                                    <GridColumn TRowData="EducationTrackingResponseDTO" Title="@L["Additional Days(Day)"]">
                                        <ChildContent Context="ett">
                                            @(ett.AdditionalDays.HasValue ? ett.AdditionalDays : "-")
                                        </ChildContent>
                                    </GridColumn>
                                    <GridColumn TRowData="EducationTrackingResponseDTO" Title="@L["Process Date"]">
                                        <ChildContent Context="ett">
                                            @ett.ProcessDate?.ToShortDateString()
                                        </ChildContent>
                                    </GridColumn>
                                    <GridColumn TRowData="EducationTrackingResponseDTO" Title="@L["Description"]">
                                        <ChildContent Context="ett">
                                            @(ett.Description ?? "-")
                                        </ChildContent>
                                    </GridColumn>
                                </Grid>
                            }
                            else
                            {
                                <Spinner></Spinner>
                            }
                            <div class="form-group mt-5">
                                <p class="text-secondary font-size-h4 mt-3">@L["Additional Explanations"]</p>
                                <InputTextArea class="form-control" @bind-Value="_opinion.AdditionalExplanation" />
                                <ValidationMessage For="@(() => _opinion.AdditionalExplanation)" />
                                @if (!string.IsNullOrEmpty(_explanationValidationMessage))
                                {
                                    <div class="validation-message">@_explanationValidationMessage</div>
                                }
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header" id="headingOne4" @onclick="() => Collapsed[0] =! Collapsed[0]">
                            <div class="card-title @(Collapsed[0]?"collapsed":"")" data-target="#collapseOne4">
                                <i class="flaticon-calendar-3"></i> @L["Göreve Bağlılık"]
                                <div class="position-absolute top-0 right-0 my-3 mr-12 d-flex self-align-end">
                                    <span class="@GetAverageClass((Shared.Extensions.EnumExtension.GetAverage(new int?[]{_opinion.ComplianceToWorkingHours_DC,_opinion.DutyResponsibility_DC,_opinion.DutyExecution_DC,_opinion.DutyAccomplishment_DC}) != "" ? Shared.Extensions.EnumExtension.GetAverage(new int?[]{_opinion.ComplianceToWorkingHours_DC,_opinion.DutyResponsibility_DC,_opinion.DutyExecution_DC,_opinion.DutyAccomplishment_DC}) : "0"))" colspan="2">
                                        Puan Ortalaması: &nbsp; <b> @Shared.Extensions.EnumExtension.GetAverage(new int?[] { _opinion.ComplianceToWorkingHours_DC, _opinion.DutyResponsibility_DC, _opinion.DutyExecution_DC, _opinion.DutyAccomplishment_DC }) </b>
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div id="collapseOne4" class="collapse @(Collapsed[0]?"":"show")" data-parent="#accordionExample4">
                            <div class="card-body">
                                <table class="table">
                                    <colgroup>
                                        <col class="col-md-8">
                                        <col class="col-md-4">
                                    </colgroup>
                                    <thead>
                                        <tr>
                                            <th scope="col">Kriter</th>
                                            <th scope="col">Puan</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td><p class="text-secondary font-size-h4 mt-3">@L["Mesai Saatlerine Uyum"]</p></td>
                                            <td>
                                                <SelectPoint @bind-Value="@_opinion.ComplianceToWorkingHours_DC"></SelectPoint>
                                                <ValidationMessage For="() => _opinion.ComplianceToWorkingHours_DC" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td><p class="text-secondary font-size-h4 mt-3">@L["Görev Sorumluluğu"]</p></td>
                                            <td>
                                                <SelectPoint @bind-Value="@_opinion.DutyResponsibility_DC"></SelectPoint>
                                                <ValidationMessage For="@(() => _opinion.DutyResponsibility_DC)" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td><p class="text-secondary font-size-h4 mt-3">@L["Görevlerini Yürütmesi"]</p></td>
                                            <td>
                                                <SelectPoint @bind-Value="@_opinion.DutyExecution_DC"></SelectPoint>
                                                <ValidationMessage For="@(() => _opinion.DutyExecution_DC)" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td><p class="text-secondary font-size-h4 mt-3">@L["Görevlerini Sonuçlandırması"]</p></td>
                                            <td>
                                                <SelectPoint @bind-Value="@_opinion.DutyAccomplishment_DC"></SelectPoint>
                                                <ValidationMessage For="@(() => _opinion.DutyAccomplishment_DC)" />
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>

                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header" id="headingTwo4" @onclick="() => Collapsed[1] =! Collapsed[1]">
                            <div class="card-title @(Collapsed[1]?"collapsed":"")" data-target="#collapseTwo4">
                                <i class="flaticon-list-3"></i> @L["Çalışma Yeteneği"]
                                <div class="position-absolute top-0 right-0 my-3 mr-12 d-flex self-align-end">
                                    <span class="@GetAverageClass((Shared.Extensions.EnumExtension.GetAverage(new int?[]{_opinion.ProfessionalPracticeAbility,_opinion.Scientificness,_opinion.TeamworkAdaptation})  != "" ? Shared.Extensions.EnumExtension.GetAverage(new int?[]{_opinion.ProfessionalPracticeAbility,_opinion.Scientificness,_opinion.TeamworkAdaptation})  : "0"))">
                                        Puan Ortalaması: &nbsp; <b> @Shared.Extensions.EnumExtension.GetAverage(new int?[] { _opinion.ProfessionalPracticeAbility, _opinion.Scientificness, _opinion.TeamworkAdaptation }) </b>
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div id="collapseTwo4" class="collapse @(Collapsed[1]?"":"show")" data-parent="#accordionExample4">
                            <div class="card-body">
                                <table class="table">
                                    <colgroup>
                                        <col class="col-md-8">
                                        <col class="col-md-4">
                                    </colgroup>
                                    <thead>
                                        <tr>
                                            <th scope="col">Kriter</th>
                                            <th scope="col">Puan</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td><p class="text-secondary font-size-h4 mt-3">@L["Mesleki Uygulama Yeteneği"]</p></td>
                                            <td>
                                                <SelectPoint @bind-Value="@_opinion.ProfessionalPracticeAbility"></SelectPoint>
                                                <ValidationMessage For="@(() => _opinion.ProfessionalPracticeAbility)" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td><p class="text-secondary font-size-h4 mt-3">@L["Bilimsellik"]</p></td>
                                            <td>
                                                <SelectPoint @bind-Value="@_opinion.Scientificness"></SelectPoint>
                                                <ValidationMessage For="@(() => _opinion.Scientificness)" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td><p class="text-secondary font-size-h4 mt-3">@L["Ekip Çalışmasına Uyumu"]</p></td>
                                            <td>
                                                <SelectPoint @bind-Value="@_opinion.TeamworkAdaptation"></SelectPoint>
                                                <ValidationMessage For="@(() => _opinion.TeamworkAdaptation)" />
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header" id="headingFour4" @onclick="() => Collapsed[2] =! Collapsed[2]">
                            <div class="card-title @(Collapsed[2]?"collapsed":"")" data-target="#collapseFour4">
                                <i class="flaticon-notes"></i> Araştırma Yeteneği
                                <div class="position-absolute top-0 right-0 my-3 mr-12 d-flex self-align-end">
                                    <span class="@GetAverageClass((Shared.Extensions.EnumExtension.GetAverage(new int?[] { _opinion.ResearchDesire, _opinion.ResearchExecutionAndAccomplish, _opinion.UsingResourcesEfficiently, _opinion.BroadcastingAbility }) != "" ? Shared.Extensions.EnumExtension.GetAverage(new int?[] { _opinion.ResearchDesire, _opinion.ResearchExecutionAndAccomplish, _opinion.UsingResourcesEfficiently, _opinion.BroadcastingAbility }) : "0"))" colspan="2">
                                        Puan Ortalaması: &nbsp; <b> @(Shared.Extensions.EnumExtension.GetAverage(new int?[] { _opinion.ResearchDesire, _opinion.ResearchExecutionAndAccomplish, _opinion.UsingResourcesEfficiently, _opinion.BroadcastingAbility }) != "" ? Shared.Extensions.EnumExtension.GetAverage(new int?[] { _opinion.ResearchDesire, _opinion.ResearchExecutionAndAccomplish, _opinion.UsingResourcesEfficiently, _opinion.BroadcastingAbility }) : "-") </b>
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div id="collapseFour4" class="collapse @(Collapsed[2]?"":"show")" data-parent="#accordionExample4">
                            <div class="card-body">
                                <table class="table">
                                    <colgroup>
                                        <col class="col-md-8">
                                        <col class="col-md-4">
                                    </colgroup>
                                    <thead>
                                        <tr>
                                            <th scope="col">Kriter</th>
                                            <th scope="col">Puan</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td><p class="text-secondary font-size-h4 mt-3">@L["Araştırma İsteği"]</p></td>
                                            <td>
                                                <SelectPoint @bind-Value="@_opinion.ResearchDesire"></SelectPoint>
                                                <ValidationMessage For="@(() => _opinion.ResearchDesire)" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td><p class="text-secondary font-size-h4 mt-3">@L["Araştırmayı Yürütme ve Sonuçlandırma"]</p></td>
                                            <td>
                                                <SelectPoint @bind-Value="@_opinion.ResearchExecutionAndAccomplish"></SelectPoint>
                                                <ValidationMessage For="@(() => _opinion.ResearchExecutionAndAccomplish)" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td><p class="text-secondary font-size-h4 mt-3">@L["Bilgi Kaynaklarını Verimli Kullanma"]</p></td>
                                            <td>
                                                <SelectPoint @bind-Value="@_opinion.UsingResourcesEfficiently"></SelectPoint>
                                                <ValidationMessage For="@(() => _opinion.UsingResourcesEfficiently)" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td><p class="text-secondary font-size-h4 mt-3">@L["Yayın Yapma Becerisi"]</p></td>
                                            <td>
                                                <SelectPoint @bind-Value="@_opinion.BroadcastingAbility"></SelectPoint>
                                                <ValidationMessage For="@(() => _opinion.BroadcastingAbility)" />
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header" id="headingFive4" @onclick="() => Collapsed[3] =! Collapsed[3]">
                            <div class="card-title @(Collapsed[3]?"collapsed":"")" data-target="#collapseFive4">
                                <i class="flaticon-users"></i> Yönetme Yeteneği
                                <div class="position-absolute top-0 right-0 my-3 mr-12 d-flex self-align-end">
                                    <span class="@GetAverageClass((Shared.Extensions.EnumExtension.GetAverage(new int?[]{_opinion.ProblemAnalysisAndSolutionAbility,_opinion.OrganizationAndCoordinationAbility,_opinion.CommunicationSkills})  != "" ? Shared.Extensions.EnumExtension.GetAverage(new int?[]{_opinion.ProblemAnalysisAndSolutionAbility,_opinion.OrganizationAndCoordinationAbility,_opinion.CommunicationSkills})  : "0"))" colspan="2">
                                        Puan Ortalaması: &nbsp; <b> @Shared.Extensions.EnumExtension.GetAverage(new int?[] { _opinion.ProblemAnalysisAndSolutionAbility, _opinion.OrganizationAndCoordinationAbility, _opinion.CommunicationSkills }) </b>
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div id="collapseFive4" class="collapse @(Collapsed[3]?"":"show")" data-parent="#accordionExample4">
                            <div class="card-body">
                                <table class="table">
                                    <colgroup>
                                        <col class="col-md-8">
                                        <col class="col-md-4">
                                    </colgroup>
                                    <thead>
                                        <tr>
                                            <th scope="col">Kriter</th>
                                            <th scope="col">Puan</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td><p class="text-secondary font-size-h4 mt-3">@L["Problem Analiz ve Çözüm Yeteneği"]</p></td>
                                            <td>
                                                <SelectPoint @bind-Value="@_opinion.ProblemAnalysisAndSolutionAbility"></SelectPoint>
                                                <ValidationMessage For="@(() => _opinion.ProblemAnalysisAndSolutionAbility)" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td><p class="text-secondary font-size-h4 mt-3">@L["Organizasyon-Koordinasyon Yeteneği"]</p></td>
                                            <td>
                                                <SelectPoint @bind-Value="@_opinion.OrganizationAndCoordinationAbility"></SelectPoint>
                                                <ValidationMessage For="@(() => _opinion.OrganizationAndCoordinationAbility)" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td><p class="text-secondary font-size-h4 mt-3">@L["İletişim Yetenekleri"]</p></td>
                                            <td>
                                                <SelectPoint @bind-Value="@_opinion.CommunicationSkills"></SelectPoint>
                                                <ValidationMessage For="@(() => _opinion.CommunicationSkills)" />
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header" id="headingSix4" @onclick="() => Collapsed[4] =! Collapsed[4]">
                            <div class="card-title @(Collapsed[4]?"collapsed":"")" data-target="#collapseSix4">
                                <i class="flaticon-comment"></i> @L["Meslek Ahlakı"]
                                <div class="position-absolute top-0 right-0 my-3 mr-12 d-flex self-align-end">
                                    <span class="@GetAverageClass((Shared.Extensions.EnumExtension.GetAverage(new int?[]{_opinion.RelationsWithOtherStudents,_opinion.RelationsWithEducators,_opinion.RelationsWithOtherEmployees,_opinion.RelationsWithPatients})  != "" ? Shared.Extensions.EnumExtension.GetAverage(new int?[]{_opinion.RelationsWithOtherStudents,_opinion.RelationsWithEducators,_opinion.RelationsWithOtherEmployees,_opinion.RelationsWithPatients})  : "0"))" colspan="2">
                                        Puan Ortalaması: &nbsp; <b> @Shared.Extensions.EnumExtension.GetAverage(new int?[] { _opinion.RelationsWithOtherStudents, _opinion.RelationsWithEducators, _opinion.RelationsWithOtherEmployees, _opinion.RelationsWithPatients }) </b>
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div id="collapseSix4" class="collapse @(Collapsed[4]?"":"show")" data-parent="#accordionExample4">
                            <div class="card-body">
                                <table class="table">
                                    <colgroup>
                                        <col class="col-md-8">
                                        <col class="col-md-4">
                                    </colgroup>
                                    <thead>
                                        <tr>
                                            <th scope="col">Kriter</th>
                                            <th scope="col">Puan</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td><p class="text-secondary font-size-h4 mt-3">@L["Diğer Uzmanlık Öğrencileri İle İlişkiler"]</p></td>
                                            <td>
                                                <SelectPoint @bind-Value="@_opinion.RelationsWithOtherStudents"></SelectPoint>
                                                <ValidationMessage For="@(() => _opinion.RelationsWithOtherStudents)" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td><p class="text-secondary font-size-h4 mt-3">@L["Eğitim Sorumluları ve Uzmanlar İle İlişkiler"]</p></td>
                                            <td>
                                                <SelectPoint @bind-Value="@_opinion.RelationsWithEducators"></SelectPoint>
                                                <ValidationMessage For="@(() => _opinion.RelationsWithEducators)" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td><p class="text-secondary font-size-h4 mt-3">@L["Diğer Çalışanlar İle İlişkiler"]</p></td>
                                            <td>
                                                <SelectPoint @bind-Value="@_opinion.RelationsWithOtherEmployees"></SelectPoint>
                                                <ValidationMessage For="@(() => _opinion.RelationsWithOtherEmployees)" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td><p class="text-secondary font-size-h4 mt-3">@L["Hasta, Hasta Yakınları ve Uzmanlık Alanını İlgilendiren Diğer İlişkiler"]</p></td>
                                            <td>
                                                <SelectPoint @bind-Value="@_opinion.RelationsWithPatients"></SelectPoint>
                                                <ValidationMessage For="@(() => _opinion.RelationsWithPatients)" />
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                </EditForm>
            }
            else
            {
                <Spinner></Spinner>
            }
        </div>
    </div>
</div>
@*<NavigationLock ConfirmExternalNavigation="@(_ec!.IsModified())" OnBeforeInternalNavigation="ConfirmInternalNavigation"></NavigationLock>*@
@*@if (IsEditing)
{
    <FileItem Documents="_opinion.Documents" Loaded="true" IsEditing="true"></FileItem>
}
else
{
    <FileItem Documents="responseDocuments" Loaded="_fileLoaded" IsEditing="true"></FileItem>
}*@

<MyModal @ref="UploaderModalForAdd" ActionName="@L["Save"]" AsyncFunction="@(async ()=> await CallDropzone())" Size="MyModal.ModalSize.Normal">
    <Title>@L["File Upload"]</Title>
    <Body>
        <Dropzone @ref="dropzoneForAdd" EntityId=0 DocumentType="@Shared.Types.DocumentTypes.OpinionForm" />
    </Body>
</MyModal>
<MyModal @ref="UploaderModalForUpdate" ActionName="@L["Save"]" AsyncFunction="@(async ()=> await CallDropzoneForUpdate())" Size="MyModal.ModalSize.Normal">
    <Title>@L["File Upload"]</Title>
    <Body>
        <Dropzone @ref="dropzoneForUpdate" EntityId="@(_opinion.Id.HasValue?_opinion.Id.Value:0)" DocumentType="@Shared.Types.DocumentTypes.OpinionForm" />
    </Body>
</MyModal>
<MyModal @ref="UploaderModalForAdd_2" ActionName="@L["Save"]" AsyncFunction="@(async ()=> await CallDropzoneCommunique())" Size="MyModal.ModalSize.Normal">
    <Title>@L["File Upload"]</Title>
    <Body>
        <Dropzone @ref="dropzoneForAddCommunique" EntityId=0 DocumentType="@Shared.Types.DocumentTypes.Communique" />
    </Body>
</MyModal>
<MyModal @ref="UploaderModalForUpdate_2" ActionName="@L["Save"]" AsyncFunction="@(async ()=> await CallDropzoneForUpdateCommunique())" Size="MyModal.ModalSize.Normal">
    <Title>@L["File Upload"]</Title>
    <Body>
        <Dropzone @ref="dropzoneForUpdateCommunique" EntityId="@(_opinion.Id.HasValue?_opinion.Id.Value:0)" DocumentType="@Shared.Types.DocumentTypes.Communique" />
    </Body>
</MyModal>